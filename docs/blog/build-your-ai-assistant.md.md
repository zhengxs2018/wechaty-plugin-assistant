# æ„å»ºä¸€ä¸ªå±äºä½ è‡ªå·±çš„ AI åŠ©æ‰‹

æœ¬æ–‡å°†åˆ†äº«ä½¿ç”¨ WeChaty å’Œ OpenAI å¼€å‘å¾®ä¿¡æœºå™¨äººçš„ç»éªŒï¼ŒåŒ…æ‹¬å¦‚ä½•å¤„ç†å¯¹è¯ä¸Šä¸‹æ–‡ã€è¿‡æ»¤æ¶ˆæ¯ã€å¿«é€Ÿå›å¤ç­‰æ–¹é¢ï¼Œå¸Œæœ›èƒ½ç»™å¼€å‘è€…å¸¦æ¥ä¸€äº›å¯ç¤ºå’Œå¸®åŠ©ã€‚

## ä¸€ã€åˆ›å»ºæœºå™¨äºº

è¿™æ˜¯ wechaty å¯åŠ¨æœºå™¨äººçš„ä»£ç ï¼Œå¯ä»¥è¯´éå¸¸ç®€æ´ã€‚

ä½†æˆ‘ä»¬æ¥å…¥ AI éœ€è¦å¤„ç†å¥½å¯¹è¯ä¸Šä¸‹æ–‡ä»¥åŠè¿‡æ»¤æ‰ AI æ— æ³•å¤„ç†ï¼Œæˆ–ä¸éœ€è¦å¤„ç†çš„æ¶ˆæ¯ã€‚

æ‰€ä»¥æˆ‘ä»¬éœ€è¦è¿‡æ»¤æ‰ï¼š

- å¯åŠ¨æ—¶åŒæ­¥è¿‡æ¥çš„å†å²æ¶ˆæ¯
- ç¾¤èŠä¸­ï¼Œéæ–‡æœ¬å¹¶ä¸”éè¢«æåŠçš„æ¶ˆæ¯
- éçœŸå®å¥½å‹çš„æ¶ˆæ¯
- å…¶ä»– AI æ— æ³•å¤„ç†çš„æ¶ˆæ¯
- ç­‰ç­‰

è¿‡æ»¤å†å²æ¶ˆæ¯æ˜¯å› ä¸ºå¯èƒ½å·²ç»å›å¤è¿‡ï¼Œå¾®ä¿¡æ¯æ¬¡å¯åŠ¨å°±ä¼šåŒæ­¥æœ€è¿‘çš„æ¶ˆæ¯è¿‡æ¥ã€‚æˆ‘åœ¨ `puppet-wechat4u` ä¸­æœ‰çœ‹åˆ° [startTime][startTime] å±æ€§ç”¨äºè¿‡æ»¤æ­¤ç±»æ¶ˆæ¯ï¼Œä½†ä¸çŸ¥é“ä¸ºä»€ä¹ˆè¿˜ä¼šå­˜åœ¨æ­¤é—®é¢˜ï¼ŒåŸå› å¾…æŸ¥ã€‚

å› ä¸ºå¾®ä¿¡ä¸æ”¯æŒå¯Œæ–‡æœ¬æ¶ˆæ¯ï¼Œè€Œå…¶ä»–æ ¼å¼çš„æ¶ˆæ¯æ— æ³•å¸¦ @ï¼Œå¦‚æœéƒ½å¤„ç†ï¼Œå¾ˆæ˜æ˜¾å°± AI è¿™ç§éœ€è¦ä¸Šä¸‹æ–‡ï¼Œå¹¶ä¸”å­˜åœ¨é€Ÿç‡é™åˆ¶çš„ï¼Œä¸€å®šä¼šå´©ã€‚

å¾®ä¿¡ä¸­è¿˜æœ‰å¦‚ **å¾®ä¿¡å›¢é˜Ÿ** ç­‰å†…ç½®çš„å¾®ä¿¡åŠŸèƒ½ï¼Œä¹Ÿä¼šå‘é€æ¶ˆæ¯è¿‡æ¥ï¼Œæ¯”å¦‚å¼‚å¸¸ç™»å½•ï¼Œé¦–æ¬¡ç™»å½•çš„æ¬¢è¿è¯­ç­‰ï¼Œè¿™ç§å¾ˆæ˜æ˜¾ä¸éœ€è¦å¤„ç†ã€‚

```js
// æœºå™¨äººå¯åŠ¨æ—¶é—´
let startupTime = new Date();

bot.on('login', () => {
  startupTime = new Date();
});

bot.on('message', async message => {
  // å¿½ç•¥æ¯æ¬¡å¯åŠ¨åçš„å¾®ä¿¡çš„å†å²æ¶ˆæ¯
  if (startupTime > message.date()) return;

  const talker = message.talker();
  const ContactType = message.wechaty.Contact.Type;

  // å¿½ç•¥éå¥½å‹æ¶ˆæ¯ï¼Œå¦‚å¾®ä¿¡å›¢é˜Ÿå‘é€çš„æ¶ˆæ¯
  if (talker.type() !== ContactType.Individual) return;

  const room = message.room();

  // å¦‚æœæ˜¯ç¾¤æ¶ˆæ¯
  if (room) {
    // ä½†æ˜¯æ²¡æœ‰æåˆ°è‡ªå·±ï¼Œåˆ™å¿½ç•¥
    if (!(await message.mentionSelf())) return;

    // å¾®ä¿¡çš„ @ åªæ”¯æŒæ–‡æœ¬ï¼Œæ‰€ä»¥ä¸ç”¨åˆ¤æ–­å…¶ä»–æ ¼å¼
    // ä½†å¾®ä¿¡çš„æ¶ˆæ¯ä¼šå¸¦ @æ–‡æœ¬ï¼Œæ‰€ä»¥éœ€è¦é¢å¤–çš„å¤„ç†

    // è¯¢é—® AI å¤„ç†...

    return;
  }

  const MessageType = wechaty.Message.Type;
  const msgType = message.type();

  // æ–‡æœ¬ç›´æ¥å¤„ç†
  if (msgType === MessageType.Text) {
    // è¯¢é—® AI å¤„ç†...

    return;
  }

  // å¯æ ¹æ®æ¥å…¥ AI æ”¯æŒçš„æ ¼å¼
  // å†³å®šæ˜¯å¦å¤„ç†å…¶ä»–æ ¼å¼çš„æ¶ˆæ¯
  // æˆ–è€…å…¨éƒ¨å›å¤ä¸æ”¯æŒçš„æ¶ˆæ¯æ ¼å¼

  return;
});
```

## äºŒã€åˆ›å»ºå¯¹è¯ä¸Šä¸‹æ–‡

ä»€ä¹ˆæ˜¯å¯¹è¯ä¸Šä¸‹æ–‡ï¼Ÿå¯¹äºäººç±»æ¥è¯´ï¼Œåœ¨ä¸€ä¸ªåœºæ™¯ä¸­è¯´è¿‡çš„è¯å°±æ˜¯å¯¹è¯ä¸Šä¸‹æ–‡ï¼Œä½†å¯¹ AI æ— æ³•çŸ¥é“å½“å‰å¤„äºä»€ä¹ˆç¯å¢ƒï¼Œæˆ–è€…è¯´å½“å‰æé—®è€…å¤„äºä»€ä¹ˆç¯å¢ƒã€‚

æœºå™¨äººä¸æ˜¯å®ƒå®¶çš„ç½‘é¡µèŠå¤©äº§å“ï¼Œæˆ‘ä»¬å¯èƒ½ä¸€ä¼šåœ¨ç¾¤é‡Œï¼Œä¸€ä¼šåœ¨ç§èŠï¼Œæˆ–è€…å¸Œæœ›é‡æ–°å¼€å§‹ï¼Œå®ƒæ— æ³•æ‹¿åˆ°å½“å‰çš„èŠå¤©è®°å½•ã€‚æ‰€ä»¥æˆ‘ä»¬ä¸»åŠ¨éœ€è¦å‘Šè¯‰å®ƒï¼Œå½“å‰å¯¹è¯å’Œå†å²å¯¹è¯çš„å†…å®¹ã€‚

OpenAI æä¾›äº† messages å­—æ®µï¼Œå…¶ä»–å‚å•†ä¹Ÿæœ‰ç±»ä¼¼æˆ–åŒåçš„å­—æ®µï¼Œè®©æˆ‘ä»¬å¯ä»¥æäº¤æˆ‘ä»¬å½“æ—¶å¯¹è¯çš„å†…å®¹ã€‚

```js
import OpenAI from 'openai';

const openai = new OpenAI();

const completion = await openai.chat.completions.create({
  model: 'gpt-3.5-turbo',
  messages: [
    { role: 'system', content: 'You are a helpful assistant.' },
    { role: 'user', content: 'Who won the world series in 2020?' },
    {
      role: 'assistant',
      content: 'The Los Angeles Dodgers won the World Series in 2020.',
    },
    { role: 'user', content: 'Where was it played?' },
  ],
});
```

ä¸è¿‡æœ¬ç¯‡æ–‡ç« ä¸»è¦ä»¥å¦ä¸€ä¸ªçŸ¥åçš„ NPM æ¨¡å— `chatgpt` ä¸ºä¸»ï¼Œè¯¦ç»†çš„æ¥å…¥è¯·æŸ¥çœ‹ [æ¥å…¥ OpenAI ç‰‡æ®µ](#ä¸‰æ¥å…¥-openai)ã€‚è¿™ä¸ªåŒ…å…è®¸æˆ‘ä»¬åªéœ€è¦ä¼ é€’å½“å‰å¯¹è¯å†…å®¹ å’Œ `parentMessageId` å­—æ®µï¼Œå‰©ä¸‹çš„å®ƒä¼šå»å¤„ç†ã€‚

### 1. åˆ›å»ºä¸Šä¸‹æ–‡çŠ¶æ€

å­˜å‚¨ `parentMessageId` å­—æ®µçš„å¯¹è±¡å°±æ˜¯æˆ‘ä»¬è¯´çš„ä¸Šä¸‹æ–‡çŠ¶æ€å¯¹è±¡ã€‚æˆ‘ä»¬éœ€è¦ç¡®ä¿æ¯ä¸ªäººå­˜çš„å°±æ˜¯è‡ªå·±çš„ï¼Œå¹¶ä¸”éš”ç¦» ç¾¤èŠ å’Œ ç§èŠ ä¸­ï¼Œå› ä¸ºåŒä¸€ä¸ªäººçš„ä¸åŒçš„ç¾¤æœ‰è‡ªå·±çš„å¯¹è¯åœºæ™¯ã€‚

```js
// ä¿å­˜æ‰€æœ‰å¯¹è¯ä¸Šä¸‹æ–‡çš„å¯¹è±¡
// ä¹Ÿå¯ä»¥ä½¿ç”¨ redis ç­‰è¿›è¡ŒæŒä¹…åŒ–å­˜å‚¨
// é¿å…æ¯æ¬¡é‡å¯ä¸¢å¤±çŠ¶æ€
const store = new Map();

// å®šä¹‰å¯¹è¯çŠ¶æ€
// ç”¨æˆ·å­˜å‚¨å½“å‰ä¸Šä¸‹æ–‡ä¸­çš„æ•°æ®
function defineState(id) {
  if (store.has(id)) return store.get(id);

  const state = {};

  store.set(id, state);

  return state;
}
```

ç°åœ¨æˆ‘ä»¬æœ‰äº†ä¸€ä¸ªå®šä¹‰çŠ¶æ€å¯¹è±¡çš„å‡½æ•°ï¼Œå°±å¯ä»¥åœ¨èŠå¤©ä¸­å­˜å‚¨å¯¹è¯ä¸Šä¸‹æ–‡ä¸­éœ€è¦çš„æ•°æ®äº†ã€‚

```js
bot.on('message', async message => {
  // ...

  const room = message.room();

  if (room) {
    if (!(await message.mentionSelf())) return;

    // 1. éš”ç¦»ç¾¤èŠå’Œç§èŠçš„åŒä¸€ä¸ªäººçš„å¯¹è¯
    // 2. éš”ç¦»ä¸åŒæˆå‘˜çš„å¯¹è¯
    const state = defineState(`${room.id}:${talker.id}`);

    // è¯¢é—® AI å¤„ç†...

    return;
  }

  //...

  // 1. ç§èŠæˆ‘ä»¬åªéœ€è¦ç¡®ä¿æ˜¯åŒä¸€ä¸ªäººå°±è¡Œ
  const state = defineState(talker.id);

  if (msgType === MessageType.Text) {
    // è¯¢é—® AI å¤„ç†...

    return;
  }

  //...
});
```

### 2ã€åˆ›å»ºå¿«é€Ÿå›å¤çš„å‡½æ•°

wechaty è‡ªèº«çš„ `say` å‡½æ•°éå¸¸æ–¹ä¾¿ï¼Œä½†åœ¨ç¾¤èŠä¸­ï¼ŒAI å›å¤çš„å†…å®¹å¾ˆå®¹æ˜“è¢«å…¶ä»–æˆå‘˜çš„æ¶ˆæ¯åˆ·æ²¡ï¼Œè¿‡ä¸€ä¼šç­‰ä»–å›ç¾¤å†…çœ‹æ¶ˆæ¯ï¼Œéƒ½ä¸çŸ¥é“ AI å›å¤çš„æ˜¯è°ã€‚

å¦‚æœæˆ‘ä»¬å¸Œæœ›ç¡®ä¿å¯¹æ–¹æ”¶åˆ°æ¶ˆæ¯ï¼Œå¹¶ä¸”è®© AI æ”¯æŒå›å¤å¤šä¸ªç”¨æˆ·ï¼Œæœ€å¥½çš„åŠæ³•å°±æ˜¯ @ å½“æ—¶çš„ç”¨æˆ·ã€‚ä½†ç§èŠæ˜¯æ²¡æœ‰ @ çš„ï¼Œè™½ç„¶æœ‰ `message.say()` å‡½æ•°ï¼Œä½†å†…éƒ¨ä¸ä¼šä¸ºæˆ‘ä»¬ @ å¯¹æ–¹ï¼Œäºæ˜¯æˆ‘ä»¬éœ€è¦è‡ªå·±å®ç°ä¸€ä¸ªå›å¤å‡½æ•°ã€‚

```js
import { log, type Sayable } from "wechaty";

/**
 * åˆ›å»ºå¿«é€Ÿå›å¤å‡½æ•°
 *
 * @param sayable - å¯ä»¥è¢«å‘é€çš„å†…å®¹
 * @param finished - æ˜¯å¦ç»“æŸå¯¹è¯ï¼Œä»…ç”¨äºè¾“å‡ºæ—¥å¿—
 * @param bubble - æ˜¯å¦çº¯æ°”æ³¡æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯ç¾¤å†…åªå‘å†…å®¹ï¼Œä¸ @ å¯¹æ–¹
 */
async function reply(
  sayable: Sayable,
  finished?: boolean,
  bubble?: boolean
): Promise<void> {
  const room = message.room();

  if (room) {
    if (typeof sayable === "string" || bubble === false) {
      await room.say(`\n\n ${sayable}`, talker);
    } else {
      await room.say(sayable);
    }
  } else {
    await talker.say(sayable);
  }

  if (finished) {
    if (room) {
      log.info(
        `ğŸ¤–ï¸ [${
          message.id
        }] åœ¨æˆ¿é—´ (${await room.topic()}) å›å¤ (${talkerName}) çš„æ¶ˆæ¯`
      );
    } else {
      log.info(`ğŸ¤–ï¸ [${message.id}] å›å¤(${talkerName})çš„æ¶ˆæ¯`);
    }
  }
}
```

è¿™æ˜¯æˆ‘ä»¬åœ¨å¤„ç†æ¶ˆæ¯å‰ï¼Œè¦åˆ›å»ºçš„ä¸€ä¸ªå›å¤å‡½æ•°ï¼Œå¸®åŠ©æˆ‘ä»¬è§£å†³æŒ‡å®šå›å¤æé—®è€…çš„å‡½æ•°ã€‚

### 3ã€åˆ›å»ºä¸Šä¸‹æ–‡å¯¹è±¡

æˆ‘ä»¬ç°åœ¨æœ‰äº†ä¸€ä¸ªå­˜å‚¨å½“å‰å¯¹è¯ä¸Šä¸‹æ–‡çŠ¶æ€çš„å¯¹è±¡ä»¥åŠä¸€ä¸ªå¾ˆæ–¹ä¾¿çš„ï¼ŒæŠŠ çŠ¶æ€ï¼Œå›å¤å‡½æ•°ï¼Œæ¶ˆæ¯å¯¹è±¡åˆå¹¶èµ·æ¥å°±æ˜¯åç»­å¤„ç†éœ€è¦çš„ä¸Šä¸‹æ–‡å¯¹è±¡äº†ã€‚

```js
bot.on('message', async message => {
  // ...

  if (room) {
    if (!(await message.mentionSelf())) return;

    //...

    // åˆ›å»ºå¯¹è¯ä¸Šä¸‹æ–‡å¯¹è±¡
    const ctx = {
      state,
      replay,
      message,
    };

    // è¯¢é—® AI å¤„ç†...

    return;
  }

  //...

  // 1. ç§èŠæˆ‘ä»¬åªéœ€è¦ç¡®ä¿æ˜¯åŒä¸€ä¸ªäººå°±è¡Œ
  const state = defineState(talker.id);

  if (msgType === MessageType.Text) {
    // åˆ›å»ºå¯¹è¯ä¸Šä¸‹æ–‡å¯¹è±¡
    const ctx = {
      state,
      replay,
      message,
    };

    // è¯¢é—® AI å¤„ç†...

    return;
  }

  //...
});
```

è¿™æ ·åé¢ä½¿ç”¨å°±æ–¹ä¾¿å¾ˆå¤šï¼Œä¸‹ä¸€æ­¥æˆ‘ä»¬è¦å¼€å§‹æ¥å…¥ OpenAIã€‚

## ä¸‰ã€æ¥å…¥ OpenAI

è™½ç„¶ OpenAI å®˜æ–¹æœ‰æä¾› SDKï¼Œä½†æˆ‘ä»¬é€‰æ‹©éå®˜æ–¹çš„ [chatgpt][chatgpt] ä½œä¸ºæ¥å…¥ç”¨åˆ°çš„åŒ…ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦ä¸€ä¸ªäººå¸®æˆ‘ä»¬è®°å½•å’Œ AI å¯¹è¯çš„å†å²æ¶ˆæ¯ã€‚

åœ¨ `chatgpt` è¿™ä¸ªæ¨¡å—ä¸­ï¼Œæˆ‘ä»¬åªè¦ä¼ é€’ `parentMessageId` å­—æ®µå°±å¯ä»¥å®Œæˆå†å²æ¶ˆæ¯çš„ä¼ è¾“ã€‚

```js
import { ChatGPTAPI } from 'chatgpt';

const api = new ChatGPTAPI({ apiKey: process.env.OPENAI_API_KEY });

// send a message and wait for the response
let res = await api.sendMessage('What is OpenAI?');
console.log(res.text);

// send a follow-up
res = await api.sendMessage('Can you expand on that?', {
  parentMessageId: res.id,
});

console.log(res.text);
```

åŸºäºè¿™ä¸ªå°è£…ï¼Œç»“åˆä¹‹å‰çš„å¯¹è¯ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œå°±å¯ä»¥å¾ˆå®¹æ˜“åˆ›å»ºå’Œ AI æ²Ÿé€šçš„æ–¹æ³•ã€‚

```js
const api = new ChatGPTAPI({ apiKey: process.env.OPENAI_API_KEY });

// è¿™é‡Œæ¥å—çš„å°±æ˜¯å‰é¢åˆ›å»ºçš„å¯¹è¯ä¸Šä¸‹æ–‡
async function askAI({ message, state, reply }) {
  // ä½ ä¹Ÿå¯ä»¥æ”¯æŒå…¶ä»–æ¶ˆæ¯
  const text = message.text();

  const res = await api.sendMessage(text, {
    // å¦‚æœä¹‹å‰è®°å½• id å°±ä¼ é€’
    parentMessageId: state.parentMessageId,
  });

  // å›å¤ç”¨æˆ·
  await reply(res.text, true);

  // å­˜å‚¨å½“å‰æ¶ˆæ¯ ID åˆ°å¯¹è¯çŠ¶æ€
  state.parentMessageId = res.id;
}
```

ç›¸ä¿¡å¤§éƒ¨åˆ†äººéƒ½å·²ç»ç”¨è¿‡ AI å‚å•†æä¾›çš„åœ¨çº¿ chat äº§å“ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„åŠŸèƒ½ï¼Œé‚£å°±æ˜¯ **æ–°å»ºèŠå¤©**ï¼Œä½†å¾®ä¿¡ä¸æ”¯æŒäº’åŠ¨ç±»æ¶ˆæ¯ã€‚

æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä»æ¶ˆæ¯æ–‡æœ¬ä¸­ä¸‹æ‰‹ï¼Œé‚£å°±æ˜¯æ ¹æ®æ¶ˆæ¯å†…å®¹åˆ¤æ–­å¯¹è¯è€…çš„æ„å›¾ã€‚

```js
const api = new ChatGPTAPI({ apiKey: process.env.OPENAI_API_KEY });

const newKeywords = ['æ–°å¯¹è¯', 'é‡æ–°å¼€å§‹'];

// è¿™é‡Œæ¥å—çš„å°±æ˜¯å‰é¢åˆ›å»ºçš„å¯¹è¯ä¸Šä¸‹æ–‡
async function askAI({ message, state, reply }) {
  // ä½ ä¹Ÿå¯ä»¥æ”¯æŒå…¶ä»–æ¶ˆæ¯
  const text = message.text();

  // åˆ¤æ–­ç”¨æˆ·æ˜¯å¦å¸Œæœ›é‡æ–°å¼€å§‹èŠå¤©
  if (newKeywords.includes(text)) {
    // ç›´æ¥åˆ é™¤å°±è¡Œ
    delete state.parentMessageId;

    // å‘Šè¯‰ç”¨æˆ·å¯ä»¥ä»æ–°å¼€å§‹äº†
    await reply('å¥½çš„ï¼Œæ–°çš„å¯¹è¯ä»ç°åœ¨å¼€å§‹ï¼ŒæœŸå¾…ä¸æ‚¨çš„äº¤æµã€‚', true);
    return;
  }

  const res = await api.sendMessage(text, {
    // å¦‚æœä¹‹å‰è®°å½• id å°±ä¼ é€’
    parentMessageId: state.parentMessageId,
  });

  // å›å¤ç”¨æˆ·
  await reply(res.text, true);

  // å­˜å‚¨å½“å‰æ¶ˆæ¯ ID åˆ°å¯¹è¯çŠ¶æ€
  state.parentMessageId = res.id;
}
```

## å››ã€æˆ‘ç›®å‰é‡åˆ°çš„é—®é¢˜

è¿™æ˜¯æˆ‘ç›®å‰ä¸ºæ­¢å‡ºç°çš„é—®é¢˜ï¼Œå¸Œæœ›èƒ½ç»™å¤§å®¶ä¸€ç‚¹æç¤ºï¼Œé¿å…è¢«å°å·ã€‚

- ç™»å½•æŠ¥ 1209 é”™è¯¯
  - **å‡ºç°æ—¶æœº** é¢‘ç¹ç™»å½• æˆ– å¯åŠ¨
  - **å¯¼è‡´ç»“æœ** æ— æ³•ç™»å½•
  - **ä½•æ—¶è§£é™¤** éœ€è¦ç­‰ä¸€ä¼šæ‰å¯ä»¥æ­£å¸¸ç™»å½•
  - **è§£å†³åŠæ³•** æ— è§£ï¼Œæˆ‘ç°åœ¨éƒ½æ˜¯éš”å‡ åˆ†ç§åï¼Œæ‰é€‰æ‹©é‡å¯æœºå™¨äºº
- å‘é€å›¾ç‰‡ä¼šæŠ¥ 1205 é”™è¯¯
  - **å‡ºç°æ—¶æœº** ç¾¤å†…å›¾ç‰‡å‘é€è¿‡å¤šï¼Œå¹¶ä¸”é¢‘ç‡è¿‡å¿«
  - **å¯¼è‡´ç»“æœ** æ— æ³•å‘é€å›¾ç‰‡ç»™å¯¹æ–¹
  - **ä½•æ—¶è§£é™¤** å¿«é€Ÿå‘å›¾åˆ°ä¸€å®šé¢‘ç‡å°±ä¼šå‡ºç°ï¼Œè¿‡ä¸€ä¼šä¼šè‡ªåŠ¨å›å¤
  - **è§£å†³åŠæ³•** æˆ‘ä¸ºæ¯æ¬¡å›¾ç‰‡å’Œæ¶ˆæ¯å‘é€æ·»åŠ  300 ï½ 500 æ¯«ç§’å»¶è¿Ÿåï¼Œæ²¡æœ‰å†å‡ºç°ã€‚
- ç»å¸¸è«åå…¶å¦™çš„å›å¤ä¹‹å‰çš„ç”¨æˆ·
  - **å‡ºç°æ—¶æœº** ä¸ç¡®å®š
  - **å¯¼è‡´ç»“æœ** åŠå¤œç–¯ç‹‚å‘æ¶ˆæ¯å¹¶ä¸” @ å¯¹æ–¹
  - **ä½•æ—¶è§£é™¤** ä¸ç¡®å®š
  - **è§£å†³åŠæ³•** åˆæ­¥æ’æŸ¥æ˜¯æ¶ˆæ¯å›æµï¼Œåº”è¯¥æ˜¯åå°æ¶ˆæ¯åŒæ­¥é—®é¢˜ï¼Œæ‰€ä»¥è®°å½•æ¯ä¸€æ¡æ¶ˆæ¯çš„ IDï¼Œå¤„ç†å‰å…ˆéªŒè¯æ˜¯å¦æ”¶åˆ°è¿‡ã€‚
- ç§èŠæ¶ˆæ¯å¯ä»¥ï¼Œä½†ç¾¤å†…æ¶ˆæ¯æ— æ³•å‘é€
  - **å‡ºç°æ—¶æœº** ç¾¤å†…æ¶ˆæ¯å‘é€é¢‘ç‡è¿‡å¿«ï¼Œæ¡æ•°è¿‡å¤š æˆ– æ–°å¾®ä¿¡å·åŠ äººé¢‘ç¹
  - **å¯¼è‡´ç»“æœ** æ— æ³•å‘é€æ¶ˆæ¯åˆ°ç¾¤å†…
  - **ä½•æ—¶è§£é™¤** è½»å¾®çš„å°±æ˜¯ç¦è¨€ï¼Œé‡çš„å°±æ˜¯è¢«å…³å°é»‘å±‹äº†ï¼Œä½†åŠ äººé¢‘ç¹æ˜¯å¾ˆå¤§æ¦‚ç‡è¢«å°çš„ï¼Œå»å¾®ä¿¡å®‰å…¨ä¸­å¿ƒå¯ä»¥æŸ¥åˆ°è¢«å…³ç†ç”±å’Œè§£é™¤æ—¶é—´
  - **è§£å†³åŠæ³•** ç»™æ¯ä¸€æ¡å›å¤çš„æ¶ˆæ¯åŠ  300 ï½ 500 æ¯«ç§’çš„å»¶è¿Ÿ
- ç™»å½•åæŠ¥ batchGetContact 1205 é”™è¯¯
  - **å‡ºç°æ—¶æœº** ä½¿ç”¨ wechat4u éƒ¨ç½²åˆ°æœåŠ¡å™¨å¾ˆå¤§æ¦‚ç‡å‡ºç°ï¼Œå…¶ä»– puppet æ²¡è¯•è¿‡
  - **å¯¼è‡´ç»“æœ** æœ‰å¯èƒ½ä¸‹ä¸€ç§’æœºå™¨äººå°±è‡ªåŠ¨é€€å‡ºç™»å½•
  - **ä½•æ—¶è§£é™¤**
  - **è§£å†³åŠæ³•** è¿˜æ²¡æ’æŸ¥åŸå› 

åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¹Ÿå› ä¸ºä¸€äº›æ“ä½œä¸è°¨æ…ï¼Œä»˜å‡ºäº†ä¸€äº›ä»£ä»·ï¼Œé‚£å°±æ˜¯ï¼š

- 1 ä¸ªå¾®ä¿¡å°å·è¢«å…³ 6 ä¸ªæœˆ **å°é»‘å±‹**ï¼ˆå·²è§£å°ï¼‰
- 1 ä¸ªå¾®ä¿¡å°å·è¢« **ç¦è¨€** äº†ä¸€å¤©ï¼ˆå·²è§£å°ï¼‰

åœ¨ 02/10 puppet-wechat4u ä»“åº“ä¹Ÿå‡ºäº†ä¸€ä¸ªæç¤ºï¼Œè®©å¤§å®¶è°¨æ…ä½¿ç”¨ï¼Œåº”è¯¥éƒ½æ˜¯é‡åˆ°å’Œæˆ‘ç±»ä¼¼çš„äººå¤ªå¤šçš„ç¼˜æ•…ã€‚

## äº”ã€æœªå®Œå¾…ç»­

ç°åœ¨æˆ‘ä»¬å·²ç»æœ‰äº†ä¸€ä¸ªæœ€ç®€å•çš„æ¥å…¥ OpenAI çš„æœºå™¨äººï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­ä¼˜åŒ–ï¼Œæ¯”å¦‚æ”¯æŒå›¾ç‰‡ï¼Œæ”¯æŒæ–‡ä»¶ï¼Œæˆ–è€…æ¥å…¥å¤šæ¨¡å‹ç­‰ç­‰ã€‚

è¿™ä¹Ÿæ˜¯æ­¤ç¯‡æ–‡ç« ä¹Ÿæ˜¯æœ¬ä»“åº“çš„å®ç°æ€è·¯ï¼Œå¸Œæœ›èƒ½ç»™å¤§å®¶å¸¦æ¥ä¸€äº›æç¤ºä¸å¸®åŠ©ã€‚

[startTime]: https://github.com/wechaty/puppet-wechat4u/blob/51280590e722bc59754ad178b697574abd968d25/src/puppet-wechat4u.ts#L412
[chatgpt]: https://www.npmjs.com/package/chatgpt
